<?php
/*   ________________________________________
    |                 GarudaCBT              |
    |    https://github.com/garudacbt/cbt    |
    |________________________________________|
*/
 defined("\102\x41\x53\x45\x50\101\x54\x48") or exit("\x4e\157\x20\144\151\162\145\x63\x74\x20\x73\143\x72\x69\160\x74\x20\x61\143\143\x65\163\x73\x20\141\x6c\154\x6f\x77\145\144"); class Update extends CI_Controller { function __construct() { goto GTFsw; ud32y: $this->load->library("\145\156\x63\x72\171\x70\164\x69\157\x6e"); goto jSl7I; gjkNI: include APPPATH . "\x63\157\156\x66\151\x67\57\x64\x61\164\x61\x62\141\163\145\x2e\160\x68\160"; goto ZlR3q; EKQpE: $this->load->database(); goto ud32y; ZlR3q: $this->load->dbforge(); goto EKQpE; GTFsw: parent::__construct(); goto gjkNI; jSl7I: } public function output_json($data, $encode = true) { goto Pqzpm; Pqzpm: if (!$encode) { goto dLmLR; } goto FOAXg; D22gX: $this->output->set_content_type("\141\x70\x70\x6c\151\143\x61\164\151\157\x6e\57\152\x73\157\x6e")->set_output($data); goto asI2h; FOAXg: $data = json_encode($data); goto xDhm_; xDhm_: dLmLR: goto D22gX; asI2h: } public function index() { goto lvfiZ; IGQOC: $json = json_decode($json); goto hXEnO; pxCQy: $data["\152\163\x6f\x6e"] = $json; goto r5KR7; r5KR7: $this->load->view("\x69\156\163\x74\x61\154\154\x2f\150\145\x61\144\145\162", $data); goto OMYWa; OMYWa: $this->load->view("\151\156\163\x74\141\x6c\x6c\57\x75\160\144\x61\164\x65"); goto mkjOQ; lvfiZ: $json = file_get_contents("\56\x2f\141\163\163\145\x74\x73\57\141\160\160\57\144\142\x2f\x64\141\x74\141\142\x61\163\x65\x2e\152\163\157\x6e"); goto IGQOC; hXEnO: $json = (array) $json; goto pxCQy; mkjOQ: $this->load->view("\x69\156\x73\x74\x61\x6c\154\x2f\x66\157\157\x74\145\162"); goto IOBxK; IOBxK: } function object_to_array($data) { goto DGxJh; DWThD: $result = []; goto gw8gw; DGxJh: if (!(is_array($data) || is_object($data))) { goto nhEzh; } goto DWThD; OLlsL: nhEzh: goto FdcKn; uCa3f: return $result; goto OLlsL; Kt72r: aX11P: goto uCa3f; FdcKn: return $data; goto rQsDP; gw8gw: foreach ($data as $key => $value) { $result[$key] = is_array($data) || is_object($data) ? $this->object_to_array($value) : $value; sgmrQ: } goto Kt72r; rQsDP: } public function checkDatabase() { goto gJcKv; nYH7s: $data = ["\144\x62" => $fields, "\x63\x72\x65\x61\164\145" => $create_tables, "\x6d\x6f\144\151\146\171" => $edit_columns, "\x61\144\x64" => $add_columns, "\143\x6f\x75\156\x74\x73" => $counts, "\x6a\163\157\x6e" => $json, "\143\x75\x72\x72\x65\x6e\164" => $currentDb]; goto zj08j; shM0J: $tbl_baru = array_keys($json); goto kgvlI; CKG9y: sort($full_tables); goto VPY40; ZfmD2: $json = file_get_contents("\56\57\x61\x73\x73\x65\164\163\x2f\x61\160\x70\x2f\144\x62\57\144\141\164\x61\x62\x61\163\x65\x2e\152\x73\x6f\156"); goto tsZaB; GKkP3: $tabless = $this->db->list_tables(); goto njAaW; H1wFw: $this->db->db_debug = FALSE; goto GKkP3; kgvlI: $tbl_ada = array_keys($fields); goto LOPJx; HPd4t: xHnrT: goto ZfmD2; zj08j: $this->output_json($data); goto rZmkg; IvvNX: foreach ($full_tables as $table) { goto Ez6WW; Ez6WW: if ($this->db->table_exists($table)) { goto YLBpd; } goto NvP07; vIaCq: RIFqN: goto wPQ32; S_3EP: geU1c: goto OkuYX; k7hYa: if (!isset($json[$table])) { goto RIFqN; } goto C3m1d; G0I1j: YLBpd: goto k7hYa; ECu14: sE52P: goto vIaCq; C3m1d: foreach ($json[$table] as $jtbl) { goto Vq7LN; SBFX7: tdCWo: goto lcPIe; Vq7LN: if ($this->db->field_exists($jtbl->name, $table)) { goto y3YEe; } goto UA7q6; lcPIe: s07c_: goto r9wZV; ZLt1j: y3YEe: goto hyspz; hyspz: foreach ($fields[$table] as $ftbl) { goto OQd2h; KGVqL: qiIyf: goto VMOX6; Y1w_0: JVgU6: goto KGVqL; OQd2h: if (!($jtbl->name == $ftbl->name)) { goto qiIyf; } goto GxJ9r; GxJ9r: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto JVgU6; } goto wz7Yn; wz7Yn: $edit_columns[$table][] = $jtbl; goto Y1w_0; VMOX6: o3F5L: goto umYo8; umYo8: } goto zuieV; j1Ot2: goto tdCWo; goto ZLt1j; UA7q6: $add_columns[$table][] = $jtbl; goto j1Ot2; zuieV: gIi3J: goto SBFX7; r9wZV: } goto ECu14; P4650: goto rDsqB; goto G0I1j; wPQ32: rDsqB: goto S_3EP; NvP07: $create_tables[$table] = $json[$table]; goto P4650; OkuYX: } goto RHMgh; EaJ29: $edit_columns = []; goto IvvNX; Sxu_x: $json = (array) $json; goto shM0J; tsZaB: $json = json_decode($json); goto Sxu_x; xNASe: foreach ($tabless as $table) { goto K73Id; pvO_M: $currentDb[$table] = $retval; goto HH1SJ; a7MU0: phLcy: goto pvO_M; JkjsK: $currentDb = FALSE; goto B4N5E; TZ3GU: $retval[$i] = new stdClass(); goto FIdWj; wnNqI: eT58y: goto rMFmu; E_4SH: if (!($datafld[$i]->name == $query[$i]->column_name)) { goto rW5hI; } goto zFrht; K73Id: $datafld = $this->db->field_data($table); goto XxUPU; x0OJX: tlnZl: goto ZsFaL; k1z23: if (!($i < $c)) { goto phLcy; } goto E_4SH; ODi5O: RgM9d: goto k1z23; XxUPU: $sql = "\123\x45\x4c\105\x43\124\x20\140\143\157\x6c\x75\155\156\137\x6e\141\155\145\x60\54\x20\140\156\x75\155\x65\162\151\143\x5f\160\162\x65\143\x69\x73\151\157\156\140\x2c\40\x60\145\170\x74\162\x61\140\x2c\x20\x60\151\x73\x5f\156\x75\x6c\154\141\x62\x6c\145\x60" . "\x20\x46\x52\x4f\115\40\140\x69\156\146\x6f\x72\155\141\x74\151\x6f\x6e\x5f\x73\x63\x68\x65\x6d\141\140\x2e\140\143\x6f\154\x75\155\x6e\163\x60\40\127\110\105\122\x45\40\x74\141\142\x6c\x65\x5f\163\143\150\x65\x6d\141\40\x3d\x20\42" . $this->db->database . "\42\40\x41\116\x44\x20\164\x61\x62\x6c\x65\x5f\x6e\141\155\x65\x20\x3d\x20\x22" . $table . "\42"; goto FuRCv; zjiri: $i = 0; goto d8T2P; Kro4K: Vmol6: goto zVFe_; BKtv9: X25QI: goto x0OJX; ZsFaL: rW5hI: goto TZ3GU; B4N5E: D8tCT: goto gxTxt; WqE4m: $datafld[$i]->auto_increment = true; goto BKtv9; rMFmu: $i++; goto VfS_d; gxTxt: $query = $query->result_object(); goto Hi5Ck; FIdWj: $retval[$i]->name = $query[$i]->column_name; goto jhEry; zFrht: if (!($query[$i]->extra != '')) { goto tlnZl; } goto qgrtt; d8T2P: $c = count($query); goto ODi5O; Ptljq: $datafld[$i]->extra = $query[$i]->extra; goto lNAy3; HH1SJ: $fields[$table] = $datafld; goto Kro4K; FuRCv: if (!(($query = $this->db->query($sql)) === FALSE)) { goto D8tCT; } goto JkjsK; jhEry: $retval[$i]->extra = $query[$i]->extra; goto wnNqI; Hi5Ck: $retval = array(); goto zjiri; lNAy3: goto X25QI; goto asZGN; qgrtt: if ($query[$i]->extra == "\x61\x75\x74\x6f\137\151\x6e\x63\162\x65\155\x65\156\x74") { goto Ah8D1; } goto Ptljq; VfS_d: goto RgM9d; goto a7MU0; asZGN: Ah8D1: goto WqE4m; zVFe_: } goto HPd4t; gJcKv: $db_debug = $this->db->db_debug; goto H1wFw; s5oaZ: $full_tables = array_unique($full_tables); goto CKG9y; njAaW: $fields = []; goto JYl1E; K6Cho: $counts = count($create_tables) + count($add_columns) + count($edit_columns); goto nYH7s; VPY40: $create_tables = []; goto Wxl9u; Wxl9u: $add_columns = []; goto EaJ29; LOPJx: $full_tables = array_merge($tbl_baru, $tbl_ada); goto s5oaZ; JYl1E: $currentDb = []; goto xNASe; RHMgh: Ku8ry: goto K6Cho; rZmkg: } public function updateDatabase() { goto IslJo; XyA0j: foreach ($tabless as $table) { $fields[$table] = $this->db->field_data($table); LhIoa: } goto qFCu2; qFCu2: qjbKn: goto j5yC0; fsQcR: echo true; goto wOaKN; AnH6X: $tbl_ada = array_keys($fields); goto FA37v; TcAwa: foreach ($full_tables as $table) { goto HIL_2; uIOXv: foreach ($json[$table] as $jtbl) { goto vEQpy; JfZMI: goto ey1Wi; goto hBejd; zlipR: UYeUu: goto kC0_G; xDg4K: goto WGV99; goto zlipR; g9FqG: $this->dbforge->add_column($table, $field); goto VB9iu; kC0_G: foreach ($fields[$table] as $ftbl) { goto gPaWH; ayA32: $field = array($jtbl->name => array("\164\x79\x70\145" => $jtbl->type, "\143\x6f\x6e\163\x74\162\x61\x69\x6e\x74" => $jtbl->max_length, "\x6e\x75\x6c\154" => false)); goto eIfLL; E1knO: n_PYs: goto JhN94; CvNAH: goto xwjZG; goto sJneL; DYjFw: $this->dbforge->modify_column($table, $field); goto CE0tO; wpR4n: $field = array($jtbl->name => array("\x74\x79\160\145" => $jtbl->type, "\x63\x6f\156\x73\x74\x72\141\151\156\164" => $jtbl->max_length, "\144\145\146\x61\165\154\x74" => $jtbl->default)); goto j3RQh; j3RQh: goto NtnFB; goto E1knO; ii2Qz: $field = array($jtbl->name . "\x20\144\141\x74\x65\x74\x69\x6d\x65\x20\144\145\x66\141\x75\x6c\164\40\x63\165\162\162\x65\156\164\x5f\x74\x69\155\145\163\x74\x61\x6d\x70" . $onUpdate); goto tTSm3; xrnYN: cx2Vu: goto ZWznQ; nmRVM: $field = array($jtbl->name => array("\164\x79\x70\x65" => $jtbl->type, "\143\x6f\156\163\164\162\141\151\x6e\x74" => $jtbl->max_length, "\156\x75\154\154" => false, "\x61\165\164\x6f\137\151\156\x63\x72\x65\x6d\x65\x6e\x74" => true)); goto xrnYN; sJneL: S6IVM: goto OqnQ9; eEdMG: M2RbU: goto We_lX; j4AoB: XgDdR: goto aoYMr; gUtIy: d7L5k: goto nmRVM; QGROM: if ($jtbl->primary_key == 0) { goto S6IVM; } goto zZ03_; zZ03_: if ($jtbl->auto_increment == true) { goto d7L5k; } goto ayA32; eIfLL: goto cx2Vu; goto gUtIy; CE0tO: xwjZG: goto j4AoB; ZWznQ: $this->dbforge->add_key($jtbl->name, true); goto vc0sY; tTSm3: NtnFB: goto DYjFw; JhN94: $onUpdate = isset($jtbl->extra) ? "\x20" . strtolower($jtbl->extra) : ''; goto ii2Qz; aoYMr: e8OUV: goto eEdMG; gPaWH: if (!($jtbl->name == $ftbl->name)) { goto e8OUV; } goto uaGhP; vc0sY: $this->dbforge->modify_column($table, $field); goto CvNAH; uaGhP: if (!($jtbl->default != $ftbl->default || $jtbl->max_length != $ftbl->max_length || $jtbl->type != $ftbl->type)) { goto XgDdR; } goto QGROM; OqnQ9: if ($jtbl->default == "\103\x55\x52\122\105\x4e\124\137\124\x49\x4d\x45\123\124\x41\115\120") { goto n_PYs; } goto wpR4n; We_lX: } goto Fks0Y; vEQpy: if ($this->db->field_exists($jtbl->name, $table)) { goto UYeUu; } goto tdhXy; AY6f4: $this->dbforge->add_key($jtbl->name, true); goto IkJRs; bL1Sn: $field = array($jtbl->name => array("\x74\x79\160\x65" => $jtbl->type, "\143\x6f\156\163\164\162\141\151\156\x74" => $jtbl->max_length, "\156\165\x6c\154" => false)); goto AY6f4; ehEMo: IIX67: goto sgcid; hBejd: mqH_W: goto p0Pxa; VB9iu: ey1Wi: goto xDg4K; Fks0Y: l1j4T: goto S2dZk; IkJRs: $this->dbforge->add_column($table, $field); goto JfZMI; p0Pxa: $field = array($jtbl->name => array("\x74\171\160\x65" => $jtbl->type, "\x63\157\x6e\x73\x74\162\141\151\x6e\x74" => $jtbl->max_length, "\x64\x65\x66\x61\x75\x6c\x74" => $jtbl->default)); goto g9FqG; S2dZk: WGV99: goto ehEMo; tdhXy: if ($jtbl->primary_key == 0) { goto mqH_W; } goto bL1Sn; sgcid: } goto FZY8i; FZY8i: ZWZkI: goto nHmRz; NPBWw: foreach ($json[$table] as $tbl => $jtbl) { goto Uu_U3; rcu7I: $this->dbforge->add_key($jtbl->name, true); goto UFOFq; UFOFq: vKGqB: goto WWZ64; AlA7u: if (!($jtbl->primary_key == 1)) { goto vKGqB; } goto rcu7I; WWZ64: T22Eu: goto hLLyy; Uu_U3: $field = [$jtbl->name => ["\164\171\160\x65" => $jtbl->type, "\x63\x6f\x6e\163\164\x72\141\151\x6e\x74" => $jtbl->max_length, "\156\165\x6c\154" => $jtbl->primary_key == 0]]; goto YjNmV; YjNmV: $this->dbforge->add_field($field); goto AlA7u; hLLyy: } goto A9vPv; iyClc: ORpAn: goto qwnpj; qwnpj: if (!isset($json[$table])) { goto sz02f; } goto uIOXv; nHmRz: sz02f: goto RM_Id; HIL_2: if ($this->db->table_exists($table)) { goto ORpAn; } goto T19Pq; gEaxP: $this->dbforge->create_table($table, TRUE); goto aa2sj; uHNQ9: kXNb2: goto nJgBs; Wv0ii: goto hr7Lg; goto iyClc; A9vPv: dYvxf: goto gEaxP; RM_Id: hr7Lg: goto uHNQ9; T19Pq: if (!isset($json[$table])) { goto L33dC; } goto NPBWw; aa2sj: $this->db->query("\x41\x4c\x54\105\122\x20\124\x41\x42\x4c\105\x20\40\140" . $table . "\x60\x20\105\x4e\x47\x49\116\105\x20\x3d\40\x49\x6e\156\x6f\104\x42"); goto zUk8a; zUk8a: L33dC: goto Wv0ii; nJgBs: } goto TJWJx; ItAtn: $json = (array) $json; goto VKBGA; IslJo: $tabless = $this->db->list_tables(); goto T7Tv2; VKBGA: $tbl_baru = array_keys($json); goto AnH6X; TJWJx: XAZPR: goto fsQcR; GhKCN: $json = json_decode($json); goto ItAtn; nTgBj: $full_tables = array_unique($full_tables); goto rYwG2; T7Tv2: $fields = []; goto XyA0j; j5yC0: $json = file_get_contents("\x2e\x2f\x61\x73\x73\145\164\163\x2f\x61\160\160\x2f\x64\x62\x2f\x64\141\x74\x61\x62\141\163\x65\56\x6a\163\x6f\156"); goto GhKCN; rYwG2: sort($full_tables); goto TcAwa; FA37v: $full_tables = array_merge($tbl_baru, $tbl_ada); goto nTgBj; wOaKN: } public function checkDb() { goto FuIai; L3aDj: $create_tables = []; goto lfhB5; UQdqc: $tbl_seharusnya = array_keys($json); goto WR_Bt; IMQlA: $script_edit_column = []; goto ROqEj; ZysZI: qpMCo: goto qt_zj; O4rwG: $fields = []; goto ZmjyW; nj542: sort($full_tables); goto L3aDj; pUuzk: XdtYD: goto T_ec0; hd1Rj: $tabless = $this->db->list_tables(); goto O4rwG; J2oKY: $full_tables = array_merge($tbl_seharusnya, $tbl_ada); goto gANOE; WR_Bt: $tbl_ada = array_keys($fields); goto J2oKY; FuIai: $db_debug = $this->db->db_debug; goto HoZFD; ZmjyW: foreach ($tabless as $table) { goto EMRP7; EMRP7: $sql = "\123\105\x4c\x45\x43\x54\40\x60\143\x6f\x6c\x75\155\x6e\x5f\x6e\141\x6d\x65\140\54\40\140\143\157\154\165\x6d\156\137\x74\171\160\x65\140\54\40\140\143\157\x6c\154\x61\164\x69\x6f\x6e\x5f\156\141\155\145\x60\x2c\40\140\x64\x61\x74\141\137\164\171\x70\x65\x60\54\x20\140\143\150\141\162\141\x63\x74\145\x72\137\x6d\141\170\x69\x6d\x75\155\137\154\145\x6e\x67\x74\150\x60\54\x20\140\156\165\155\145\x72\151\x63\x5f\160\162\145\143\x69\x73\x69\157\156\140\x2c" . "\40\x60\x63\157\x6c\165\155\156\x5f\144\145\x66\x61\165\x6c\164\x60\x2c\40\140\x63\x6f\x6c\x75\x6d\x6e\x5f\x6b\x65\171\140\x2c\x20\x60\143\157\154\x75\155\x6e\137\x63\x6f\x6d\155\x65\x6e\164\140\54\40\140\145\x78\164\162\x61\140\54\40\140\x69\x73\137\156\x75\154\154\x61\x62\x6c\145\x60\15\xa\x9\11\x9\x46\122\x4f\x4d\40\x60\x69\156\146\x6f\162\155\x61\x74\151\157\156\x5f\x73\143\x68\x65\x6d\141\x60\x2e\x60\x63\x6f\x6c\165\155\156\x73\140\40\x57\x48\105\122\x45\x20\164\141\x62\x6c\x65\137\163\143\x68\145\155\141\40\75\40\42" . $this->db->database . "\42\40\101\116\104\40\x74\x61\x62\x6c\145\137\156\141\x6d\145\40\75\x20\42" . $table . "\42"; goto EaOL0; hREof: $c = count($query); goto NNmhX; TRltq: $retval[$i]->type = $query[$i]->data_type; goto GX4bQ; PLuQZ: if (!($i < $c)) { goto ZV35z; } goto RbQXN; DWpfb: $retval[$i]->max_length = $query[$i]->character_maximum_length > 0 ? $query[$i]->character_maximum_length : $query[$i]->numeric_precision; goto C1FAS; YXS__: $retval[$i]->comment = $query[$i]->column_comment; goto vzeVb; NNmhX: w8QM0: goto PLuQZ; EaOL0: if (!(($query = $this->db->query($sql)) === FALSE)) { goto NFfsH; } goto etk61; sYLok: Ec0A5: goto WtmfD; QrPr1: $retval[$i]->name = $query[$i]->column_name; goto Jl8vz; C1FAS: $retval[$i]->default = $query[$i]->column_default; goto YXS__; vzeVb: $retval[$i]->extra = $query[$i]->extra; goto uePy9; etk61: $fields = FALSE; goto pcNoS; pcNoS: NFfsH: goto uNEmp; GX4bQ: $retval[$i]->collation = $query[$i]->collation_name; goto DWpfb; vg7t4: $i++; goto ec2pi; SskrS: $retval[$i]->primary = $query[$i]->column_key; goto x69z_; lc6Fy: $i = 0; goto hREof; TAeM9: $retval = array(); goto lc6Fy; x69z_: d7h60: goto vg7t4; uePy9: $retval[$i]->nullable = $query[$i]->is_nullable; goto SskrS; RbQXN: $retval[$i] = new stdClass(); goto QrPr1; ec2pi: goto w8QM0; goto F5PJB; F5PJB: ZV35z: goto Rsi4u; Jl8vz: $retval[$i]->col_type = $query[$i]->column_type; goto TRltq; Rsi4u: $fields[$table] = (object) ["\164\141\x62\x6c\x65\x5f\156\x61\x6d\x65" => $table, "\143\x6f\x6c\x75\x6d\x6e\x73" => $retval]; goto sYLok; uNEmp: $query = $query->result_object(); goto TAeM9; WtmfD: } goto pUuzk; lfhB5: $script_create_table = []; goto bnHRe; cwiV4: $json = (array) $json; goto UQdqc; vAkFj: $json = json_decode($json); goto cwiV4; T_ec0: $json = file_get_contents("\x2e\x2f\x61\163\163\145\x74\x73\x2f\141\x70\160\x2f\144\142\x2f\x64\x61\164\x61\x62\141\163\x65\x2e\152\x73\x6f\156"); goto vAkFj; gANOE: $full_tables = array_unique($full_tables); goto nj542; RIHzW: $data = ["\x66\x69\x65\154\144\163" => $fields, "\143\x72\x65\141\164\x65\x5f\x74\x61\142\154\145\x73" => $create_tables, "\143\x6f\x75\x6e\164\137\164\x62\x6c" => count($create_tables), "\x61\144\x64\x5f\x63\157\154\165\x6d\156\163\137\164\x6f\x5f\x74\141\142\x6c\145" => $add_columns, "\x63\157\165\156\x74\137\143\157\x6c" => count($add_columns), "\145\144\151\x74\x5f\x63\157\154\x75\x6d\156\x73" => $edit_columns, "\143\x6f\x75\156\x74\137\x6d\x6f\144" => count($edit_columns), "\x61\144\144\137\164\142\154" => $this->encryption->encrypt(json_encode($script_create_table)), "\x61\x64\144\137\143\157\x6c" => $this->encryption->encrypt(json_encode($script_create_column)), "\x6d\157\144\137\143\157\x6c" => $this->encryption->encrypt(json_encode($script_edit_column))]; goto tC6eR; LqJLt: $script_create_column = []; goto tiI7B; bnHRe: $add_columns = []; goto LqJLt; tC6eR: $this->output_json($data); goto I01RN; tiI7B: $edit_columns = []; goto IMQlA; ROqEj: foreach ($full_tables as $table) { goto B8n03; mTuz7: $add_column = []; goto P818I; e7sWC: goto kWtNc; goto UAKtQ; g3NKJ: $script_create_table[$table] = $script; goto AlLEB; jX4Ql: iERZa: goto e7sWC; AlLEB: kWtNc: goto yyi9R; oCNdD: $script = "\103\122\105\101\x54\x45\x20\124\101\x42\x4c\x45\x20\x60" . $table . "\140\x20\x28"; goto sCwx_; ByReu: qZYMy: goto rm83v; fS778: if (!(count($add_column) > 0)) { goto qZYMy; } goto Y7BR3; yyi9R: jjp8M: goto CVis6; sCwx_: $pri = ''; goto vQDlO; Y7BR3: $script_create_column[$table] = "\101\114\124\x45\122\40\124\x41\x42\x4c\x45\x20\x60" . $table . "\x60\40" . implode("\x2c\x20", $add_column) . "\x3b"; goto ByReu; Suefg: foreach ($json[$table]->columns as $jtbl) { goto hK3WY; t8pre: goto k6m2L; goto qpNZk; qpNZk: FyJxs: goto EdjFo; GIFb2: if ($jtbl->max_length == null) { goto hHC6K; } goto YOIF3; A26Tg: if (!(strtoupper($extra) == "\40\101\125\124\x4f\x5f\111\x4e\x43\x52\x45\115\105\116\124")) { goto swLaa; } goto wJuts; xY0cf: goto s3cgd; goto n6uBy; h9Z0V: hHC6K: goto byJCQ; UFlpH: goto s3cgd; goto h9Z0V; n6uBy: Ufc_O: goto mLIDJ; vHjoU: $nullable = $jtbl->nullable == "\x4e\x4f" ? "\40\x4e\x4f\124\40\x4e\125\x4c\x4c" : ''; goto EooEW; EdjFo: $length = "\x28" . ($jtbl->max_length + 1) . "\51"; goto i6acb; EooEW: $default = $jtbl->default == null ? '' : "\40\104\x45\x46\101\125\x4c\x54\40" . $jtbl->default; goto nznZ0; XpE8v: $add_columns[$table][] = $jtbl; goto GIFb2; SUGWW: TYc5t: goto UveIN; g1oni: s3cgd: goto vHjoU; tsYJ2: $length = "\50" . $jtbl->max_length . "\51"; goto t8pre; kxJlf: jApy7: goto Tzmzv; iTmCV: $comment = $jtbl->comment == '' ? '' : "\40\103\x4f\x4d\115\x45\116\x54\40\x27" . $jtbl->comment . "\47"; goto o4TaG; i6acb: k6m2L: goto g1oni; byJCQ: $length = ''; goto xY0cf; YOIF3: if ($jtbl->type != "\154\x6f\x6e\147\x74\x65\x78\x74" && $jtbl->type != "\155\145\144\151\x75\155\164\x65\170\164" && $jtbl->type != "\x74\145\170\x74") { goto Ufc_O; } goto vdZkH; dU5d8: swLaa: goto iTmCV; Tzmzv: foreach ($fields[$table]->columns as $ftbl) { goto kVRQe; pTW_2: if (strtolower($jtbl->primary) == "\165\156\x69") { goto AwpzI; } goto Ca1iY; pW16z: $extra = $jtbl->extra == '' ? '' : "\40" . strtoupper($jtbl->extra); goto ZoOBz; zTHc7: if (!($jtbl->extra != $ftbl->extra)) { goto i1TXe; } goto EJw1s; EJw1s: $edit_columns[$table][$jtbl->name]["\x65\x78\164\x72\x61"] = $jtbl->extra; goto DtdZv; uPytm: pvPG6: goto jPFCr; lyfLk: if (!($jtbl->default != null)) { goto BkOLp; } goto iE5k6; iLrgQ: if (!($ftbl->default != null)) { goto Bh3UV; } goto NzXVT; lpt9W: $jtbl->extra = strtoupper($jtbl->extra); goto rDGDg; tpvBG: $edit_columns[$table][$jtbl->name]["\143\157\x6c\137\x74\x79\x70\x65"] = $jtbl->col_type; goto pnVkA; gorwp: $edit_columns[$table][$jtbl->name]["\156\165\154\154\141\x62\x6c\x65"] = $jtbl->nullable; goto g_mS_; qLhFi: $edit_columns[$table][$jtbl->name]["\144\x65\146\x61\x75\154\x74"] = $jtbl->default; goto uPytm; g_mS_: vBmTo: goto lyfLk; rANMy: if (!($jtbl->col_type != $ftbl->col_type || $jtbl->nullable != $ftbl->nullable || $jtbl->default != $ftbl->default || $jtbl->extra != $ftbl->extra || $jtbl->comment != $ftbl->comment)) { goto WaWXg; } goto dJF2I; IuVPZ: EKrE0: goto QQu6Y; M7lOS: $ftbl->extra = strtoupper($ftbl->extra); goto jUhJ7; jlF7V: array_push($modif_column, "\x4d\117\x44\x49\106\x59\40\x60" . $jtbl->name . "\140\x20" . $jtbl->col_type . $nullable . $default . $extra . $comment); goto GKvg6; VCpzt: array_push($modif_column, "\101\104\104\40\125\116\x49\x51\x55\105\x20\x4b\x45\x59\40\140" . $jtbl->name . "\x60\40\x28\x60" . $jtbl->name . "\140\51"); goto fKQ2m; HadfO: cY7IG: goto ksdWx; jUhJ7: upzXy: goto zTHc7; o77K2: Bh3UV: goto C4nnO; HKMjg: if (!($jtbl->col_type != $ftbl->col_type)) { goto akAaB; } goto tpvBG; fT3E3: u_DAX: goto rANMy; GKvg6: WaWXg: goto IuVPZ; bi0tE: $default = $jtbl->default == null ? '' : "\x20\104\x45\x46\101\125\x4c\x54\x20" . $jtbl->default; goto pW16z; rDGDg: cKBp6: goto X2OTB; fKQ2m: K7GBt: goto fT3E3; QQu6Y: NsjjS: goto uSpn2; zi1uf: tW1jy: goto VmYCZ; Ww4zR: BkOLp: goto iLrgQ; hsjR7: $jtbl->extra = str_replace("\x28\x29", '', $jtbl->extra); goto lpt9W; ZoOBz: $comment = $jtbl->comment == '' ? '' : "\40\x43\x4f\115\115\105\x4e\x54\40\47" . $jtbl->comment . "\x27"; goto jlF7V; naCus: $edit_columns[$table][$jtbl->name]["\143\x6f\x6d\155\145\156\x74"] = $jtbl->comment; goto HadfO; iE5k6: $jtbl->default = str_replace("\x28\51", '', $jtbl->default); goto xAB8L; kVRQe: if (!($jtbl->name == $ftbl->name)) { goto EKrE0; } goto HKMjg; Ca1iY: goto K7GBt; goto zi1uf; Ou8Ko: goto K7GBt; goto SHNyc; VmYCZ: array_push($modif_column, "\101\x44\x44\x20\x50\x52\x49\115\101\122\131\x20\113\x45\131\40\50\x60" . $jtbl->name . "\140\x29"); goto Ou8Ko; jPFCr: if (!($jtbl->extra != null)) { goto cKBp6; } goto hsjR7; xAB8L: $jtbl->default = strtoupper($jtbl->default); goto Ww4zR; X2OTB: if (!($ftbl->extra != null)) { goto upzXy; } goto pqQIa; C4nnO: if (!($jtbl->default != $ftbl->default)) { goto pvPG6; } goto qLhFi; n3U85: $edit_columns[$table][$jtbl->name]["\x70\162\x69\x6d\141\162\171"] = $jtbl->primary; goto qFdvr; pnVkA: akAaB: goto d8B8F; SHNyc: AwpzI: goto VCpzt; EYuEI: if (!($jtbl->comment != $ftbl->comment)) { goto cY7IG; } goto naCus; NzXVT: $ftbl->default = str_replace("\50\51", '', $ftbl->default); goto zeHfi; d8B8F: if (!($jtbl->nullable != $ftbl->nullable)) { goto vBmTo; } goto gorwp; ksdWx: if (!($jtbl->primary != $ftbl->primary)) { goto u_DAX; } goto n3U85; DtdZv: i1TXe: goto EYuEI; qFdvr: if (strtolower($jtbl->primary) == "\160\162\151") { goto tW1jy; } goto pTW_2; dJF2I: $nullable = $jtbl->nullable == "\x4e\117" ? "\40\x4e\x4f\124\40\116\125\114\114" : ''; goto bi0tE; zeHfi: $ftbl->default = strtoupper($ftbl->default); goto o77K2; pqQIa: $ftbl->extra = str_replace("\x28\x29", '', $ftbl->extra); goto M7lOS; uSpn2: } goto Vj3fI; vdZkH: $length = ''; goto UFlpH; Vj3fI: UPN0L: goto SUGWW; nznZ0: $extra = $jtbl->extra == '' ? '' : "\x20" . strtoupper($jtbl->extra); goto A26Tg; wJuts: $extra .= "\40\x50\122\x49\x4d\101\x52\131\x20\113\x45\x59"; goto dU5d8; hK3WY: if ($this->db->field_exists($jtbl->name, $table)) { goto jApy7; } goto XpE8v; o4TaG: array_push($add_column, "\x41\x44\104\40\x60" . $jtbl->name . "\140\40" . $jtbl->type . $length . $nullable . $default . $extra . $comment); goto kxJlf; mLIDJ: if ($jtbl->type == "\151\x6e\164") { goto FyJxs; } goto tsYJ2; UveIN: } goto ZVYqE; vQDlO: foreach ($json[$table]->columns as $column) { goto RzSiV; Wlror: $pri .= $column->primary != '' ? "\120\x52\x49\115\x41\122\131\x20\x4b\x45\x59\x20\50\140" . $column->name . "\140\x29" : ''; goto dK_oE; r9W23: ZrJb8: goto pHdCS; f2xRn: goto NFS4G; goto r9W23; dptmx: $length = "\50" . $column->max_length . "\x29"; goto B3M9O; I8ceK: $extra = $column->extra == '' ? '' : "\x20" . strtoupper($column->extra); goto fMUF4; ZNNgR: if ($column->type != "\x6c\157\x6e\147\x74\145\170\x74" && $column->type != "\155\145\144\151\165\x6d\x74\145\x78\x74" && $column->type != "\x74\x65\170\164") { goto yPmzO; } goto ZL1zo; ZL1zo: $length = ''; goto f2xRn; sMJjr: $nullable = $column->nullable == "\116\117" ? "\x20\116\117\124\40\x4e\125\x4c\114" : ''; goto VEzDM; w2HFf: $length = "\x28" . ($column->max_length + 1) . "\x29"; goto pDbfm; N90M_: $script .= "\x60" . $column->name . "\x60\40" . $column->type . $length . $nullable . $default . $extra . $comment . "\x2c\40"; goto Wlror; fMUF4: $comment = $column->comment == '' ? '' : "\x20\103\117\x4d\115\x45\x4e\x54\40\47" . $column->comment . "\47"; goto N90M_; iAyV3: VjKV3: goto w2HFf; RMd5F: yPmzO: goto jHJy_; VEzDM: $default = $column->default == null ? '' : "\40\x44\x45\106\x41\125\114\124\x20" . $column->default; goto I8ceK; iio1v: goto NFS4G; goto RMd5F; RzSiV: if ($column->max_length == null) { goto ZrJb8; } goto ZNNgR; pHdCS: $length = ''; goto iio1v; jHJy_: if ($column->type == "\x69\156\164") { goto VjKV3; } goto dptmx; FCN_S: NFS4G: goto sMJjr; B3M9O: goto Vu3tq; goto iAyV3; pDbfm: Vu3tq: goto FCN_S; dK_oE: w60DS: goto ACubu; ACubu: } goto CtWis; XujV0: if (!isset($json[$table])) { goto iERZa; } goto mTuz7; CtWis: sR9oc: goto bGnmS; FsXwP: $script_edit_column[$table] = "\101\x4c\124\x45\x52\40\x54\x41\x42\114\105\40\140" . $table . "\x60\x20" . implode("\54\40", $modif_column) . "\73"; goto e7hdS; bGnmS: $script .= $pri . "\x29\40\105\116\x47\x49\x4e\105\x3d\x49\x6e\156\x6f\x44\x42\x20\x44\x45\x46\x41\x55\114\124\x20\103\110\x41\x52\x53\105\124\x3d\165\x74\146\70\x6d\142\x34\73"; goto g3NKJ; dL3hl: $create_tables[] = $json[$table]; goto oCNdD; B8n03: if (!$this->db->table_exists($table)) { goto qJmMF; } goto XujV0; ZVYqE: zai3L: goto fS778; UAKtQ: qJmMF: goto dL3hl; e7hdS: JBlCM: goto jX4Ql; rm83v: if (!(count($modif_column) > 0)) { goto JBlCM; } goto FsXwP; P818I: $modif_column = []; goto Suefg; CVis6: } goto ZysZI; HoZFD: $this->db->db_debug = FALSE; goto hd1Rj; qt_zj: $this->db->db_debug = $db_debug; goto RIHzW; I01RN: } public function createTable() { goto DE3hu; FxK4z: sleep(1); goto pmh5M; SoH0g: foreach ($scripts as $script) { $queries .= $script; qdmJR: } goto YqBCf; oRlRu: $this->output_json($data); goto K4zyP; pmh5M: $scripts = json_decode($this->encryption->decrypt($scripts)); goto Y2apr; Yv7Ub: str_replace("\45\x32\x42", "\x2b", $scripts); goto FxK4z; DE3hu: $scripts = $this->input->post("\x64\x61\164\141", true); goto Yv7Ub; ZufLj: $data["\x6d\145\163\x73\x61\x67\145"] = "\125\160\144\x61\164\145\40\x6b\157\154\x6f\x6d"; goto oRlRu; nMiUB: $data["\x73\165\143\x63\145\x73\163"] = $this->runQuery($queries); goto ZufLj; Y2apr: $queries = ''; goto SoH0g; YqBCf: yO1gO: goto nMiUB; K4zyP: } public function createColumn() { goto ik6s2; aSsvf: foreach ($scripts as $script) { $queries .= $script; DJa_H: } goto zuLPk; wBTMd: sleep(1); goto MW0Wo; u65LM: if (!(strpos("\140\165\151\144\140", $queries) !== false)) { goto kXPT0; } goto E6PPO; c7aas: $this->output_json($data); goto rafcC; E6PPO: $this->updateUID(); goto uIb4Q; zuLPk: yRGCX: goto u65LM; eOeVz: $queries = ''; goto aSsvf; uIb4Q: kXPT0: goto rvJ19; Ofqc7: str_replace("\45\x32\x42", "\x2b", $scripts); goto wBTMd; ik6s2: $scripts = $this->input->post("\x64\141\x74\141", true); goto Ofqc7; rvJ19: $data["\x73\165\x63\143\x65\x73\163"] = $this->runQuery($queries); goto LrcgP; MW0Wo: $scripts = json_decode($this->encryption->decrypt($scripts)); goto eOeVz; LrcgP: $data["\155\145\163\163\141\147\x65"] = "\x4d\157\x64\151\x66\171\40\153\157\154\x6f\x6d"; goto c7aas; rafcC: } public function editColumn() { goto PgcLf; BQjOT: str_replace("\x25\62\102", "\x2b", $scripts); goto j2MxF; ULNZN: $scripts = json_decode($this->encryption->decrypt($scripts)); goto STJ7B; HGc5F: bZtng: goto zpJNZ; STJ7B: $queries = ''; goto dG1_O; itVOb: $this->output_json($data); goto SeMi8; dG1_O: foreach ($scripts as $script) { $queries .= $script; kb9pO: } goto HGc5F; j2MxF: sleep(1); goto ULNZN; PgcLf: $scripts = $this->input->post("\x64\141\164\141", true); goto BQjOT; zpJNZ: $data["\163\x75\143\x63\145\163\x73"] = $this->runQuery($queries); goto FEa49; FEa49: $data["\x6d\145\x73\x73\x61\x67\x65"] = "\125\x70\x64\141\x74\x65\40\x73\145\x6c\145\163\x61\x69"; goto itVOb; SeMi8: } function runQuery($script) { goto Ar_BE; dJcGJ: $mysqli->close(); goto CX2QX; CX2QX: return true; goto MKQRr; FOwq1: return mysqli_connect_errno(); goto rpqe_; PbFNZ: $hostpass = $this->db->password; goto vTSbQ; FnsVq: $mysqli->multi_query($script); goto dJcGJ; EZJjs: $hostuser = $this->db->username; goto PbFNZ; XtOn6: if (!mysqli_connect_errno()) { goto gDHTG; } goto FOwq1; vTSbQ: $database = $this->db->database; goto hrZda; hrZda: $mysqli = new mysqli($hostname, $hostuser, $hostpass, $database); goto XtOn6; Ar_BE: $hostname = $this->db->hostname; goto EZJjs; rpqe_: gDHTG: goto FnsVq; MKQRr: } function updateUID() { goto S4w0s; S4w0s: $this->load->library("\x55\x75\151\144", "\x75\165\x69\144"); goto KInRv; C3_Rv: $input = array(); goto SSjjs; BL2Rh: return $this->db->update_batch("\155\141\163\164\145\x72\137\x73\151\x73\x77\141", $input, "\x69\144\137\163\x69\163\167\x61"); goto QJLxd; Nqprg: w7cfn: goto BL2Rh; SSjjs: foreach ($siswas as $siswa) { $input[] = array("\151\144\137\163\151\x73\167\141" => $siswa->id_siswa, "\165\x69\x64" => $this->uuid->v4()); E7LZP: } goto Nqprg; KInRv: $siswas = $this->db->get("\x6d\x61\x73\164\145\x72\x5f\x73\151\x73\x77\x61")->result(); goto C3_Rv; QJLxd: } function make_base() { } }
